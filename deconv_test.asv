im_org = imread('cameraman.tif');
im_org = im2double(im_org);
[ro,co] = size(im_org);

ksize = [11,11];
khalf = round(ksize/2);
h = fspecial('gaussian', ksize, 2);
h = h / sum(sum(h));

mtd = 'zero';
% mtd = 'circular';
if strcmp(mtd,'zero')
    % zero-padding to image
    imp = 
    
    g = imfilter(im, h, 0);
elseif strcmp(mtd,'circular')
    r = ro;
    c = co;
    im = im_org;
    
    g = imfilter(im, h, 'circular');
end

%gc = g(ksize(1):ro-ksize(1)+1,ksize(2):ro-ksize(2)+1);
G = fft2(g ,r,c);

H = fft2(h,r,c);
mag_H = sqrt(real(H).^2+imag(H).^2); % abs(H);
Ghat = G.*conj(H)./(mag_H.^2); % G./H;

ghat = real(ifft2( Ghat ));
figure, imshow(ghat, [])